<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="author" content="Python Taiwan">

<meta name="generator" content="mynt v0.2.3">

<link rel="shortcut icon" href="/taiwan.py/assets/images/favicon.ico" type="image/x-icon">

<link rel="alternate" href="/taiwan.py/feed.xml" type="application/atom+xml">

<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Ubuntu:400,700,400italic,700italic|Ubuntu+Mono:400,400italic" type="text/css">
<!-- <link rel="stylesheet" href="/taiwan.py/assets/css/screen.css" type="text/css">-->
<link rel="stylesheet" href="/taiwan.py/assets/css/pygments.css" type="text/css">
<link rel="stylesheet" href="/taiwan.py/assets/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="/taiwan.py/assets/css/bootstrap-responsive.min.css" type="text/css">
<style type="text/css">
  body {
    padding-top: 60px;
    padding-bottom: 40px;
  }
  footer {
    background-color: #f5f5f5;
    margin-top: 70px;
    border-top: 1px solid #e5e5e5;
    right:0px;
    left:0px;
    bottom: 0px;
  }
</style>



    <title>Server Benchmark 工具 &ndash; Python Taiwan</title>
</head>

<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="brand" href="/taiwan.py/">Python Taiwan</a>
                <div class="nav-collapse collapse">
                    <ul class="nav">
                        <li class="active"><a href="#">Home</a></li>
                        <li><a href="/taiwan.py/blogs/">Blog</a></li>
                        <li><a href="/taiwan.py/events/">Events</a></li>
                        <li><a href="/taiwan.py/projects/">Projects</a></li>
                        <li><a href="/taiwan.py/jobs/">Jobs</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="http://python.org.tw/">Wiki</a></li>
                                <li><a href="https://groups.google.com/forum/#!forum/pythontw">Google Group</a></li>
                                <li><a href="https://www.facebook.com/groups/pythontw/?fref=ts">Facebook</a></li>
                                <li class="divider"></li>
                                <li class="nav-header">Nav header</li>
                                <li><a href="/taiwan.py/archives/">Archives</a></li>
                                <li><a href="/taiwan.py/feed.xml">Feed</a></li>
                            </ul>
                        </li>
                    </ul>
                </div><!--/.nav-collapse -->
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
             
            <div id="content" class="span8">
                
    <div class="item">
        <div class="item-header">
            <h1>Server Benchmark 工具</h1>
            <h6>Friday, August 23, 2013 <span>&raquo;</span> <a href="/taiwan.py/archives/Benchmark/">Benchmark</a>, <a href="/taiwan.py/archives/OpenSource/">OpenSource</a>, Authored by Lucemia</h6>
        </div>

        <div class="item-body">
            <h1>Python寫的網路測速程式</h1>
<p>為了能夠比較不同hosting的對特定區域的網路速度而寫的簡單程式,透過speedtest-cli的服務+能夠指定國家測試, 測試結果以 csv 的方式記錄下來. 並且提供將結果匯入到 sqlite 裡面方便計算的工具</p>

<p><a href="https://github.com/lucemia/GCEvsAWS">GIT REPO</a></p>
<h2>Requirement</h2>
<p>需要先安裝 <a href="https://github.com/sivel/speedtest-cli">speedtest-cli</a> 與 <a href="https://github.com/moskytw/clime%E2%80%8E">clime</a></p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>pip install speedtest-cli
</pre></div>
</td></tr></table></div></div><div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>pip install clime
</pre></div>
</td></tr></table></div></div><h2>Install</h2><div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>git clone https://github.com/lucemia/GCEvsAWS.git
</pre></div>
</td></tr></table></div></div><h2>Usage</h2><h3>執行國別測試</h3><div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>python test.py speed-test --country=[測試國家] [server_name]
</pre></div>
</td></tr></table></div></div>
<p>範例:</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>python test.py speed-test --country=Taiwan localhost
</pre></div>
</td></tr></table></div></div>
<p>結果會存在 <code>[server_name].csv</code> 中</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre>mac,2013-08-21 21:52:30.608635,True,2133,Taiwan Fixed Network,Taipei,Taiwan,9592.46,Telus Communications,154.5.56.215,112.772,9.23,0.64
mac,2013-08-21 21:52:30.608635,True,2181,kbro CO.LTD,Taipei,Taiwan,9592.46,Telus Communications,154.5.56.215,68.347,8.80,0.65
mac,2013-08-21 21:52:30.608635,True,2182,kbro CO.LTD,Hsinchu,Taiwan,9644.62,Telus Communications,154.5.56.215,111.341,7.39,0.59
</pre></div>
</td></tr></table></div></div><h3>對特定server測試</h3><div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>python test.py test-server [server_id] [log_path]
</pre></div>
</td></tr></table></div></div>
<p>範例:</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>python test.py test-server 999 999.log
</pre></div>
</td></tr></table></div></div>
<p>回傳結果:</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">{</span>
 <span class="s">&#39;distance&#39;</span><span class="p">:</span> <span class="s">&#39;8468.27&#39;</span><span class="p">,</span>
 <span class="s">&#39;host_name&#39;</span><span class="p">:</span> <span class="s">&#39;InternetONE&#39;</span><span class="p">,</span>
 <span class="s">&#39;download&#39;</span><span class="p">:</span> <span class="s">&#39;2.49&#39;</span><span class="p">,</span>
 <span class="s">&#39;ip&#39;</span><span class="p">:</span> <span class="s">&#39;216.232.96.61&#39;</span><span class="p">,</span>
 <span class="s">&#39;test_from&#39;</span><span class="p">:</span> <span class="s">&#39;Telus Communications&#39;</span><span class="p">,</span>
 <span class="s">&#39;ping&#39;</span><span class="p">:</span> <span class="s">&#39;104.666&#39;</span><span class="p">,</span>
 <span class="s">&#39;upload&#39;</span><span class="p">:</span> <span class="s">&#39;0.62&#39;</span><span class="p">,</span>
 <span class="s">&#39;location&#39;</span><span class="p">:</span> <span class="s">&#39;Varese&#39;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div><h3>將測試結果匯入 sqlite</h3><div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>python test.py import-csv [csv_path]
</pre></div>
</td></tr></table></div></div>
<p>範例:</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>python test.py import-csv localhost.csv
</pre></div>
</td></tr></table></div></div>
<p>結果會匯入到 <code>speeddata.db</code> 中</p>
<h3>計算結果</h3><div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">select</span> <span class="k">host</span><span class="p">,</span> <span class="k">avg</span><span class="p">(</span><span class="n">server_upload</span><span class="p">),</span> <span class="k">avg</span><span class="p">(</span><span class="n">server_download</span><span class="p">)</span>
    <span class="k">from</span> <span class="n">speeddata</span>
    <span class="k">group</span> <span class="k">by</span> <span class="k">host</span>
</pre></div>
</td></tr></table></div></div>
        </div>
    </div>

            </div>
            <div id="sidebar" class="span4">
                 <iframe width="225" height="400" src="http://meetu.ps/1YJB0n" frameborder="0"></iframe>
                 <form action="http://www.newsleopard.com/mailverify.htm?x=8a2acf2c40b8e4430140c767beb04f50" target="popupwindow" method="post" onsubmit="window.open('', 'popupwindow', 'scrollbars=yes,width=350,height=115');return true">
                    <input name="email" type="text"/><br/>
                    <button type="submit">Subscribe</button>
                </form>
            </div>
        </div>
    </div>
    <footer>
        <div class="container">
            <div class="row">
                <div class="span4">
                    <h2>Taipei.py</h2>
                    <p>活動於台北周邊的 Python 玩家，歡迎來玩！</p>
                    <p><a class="btn" href="http://taipei.python.org.tw/">View details &raquo;</a></p>
                </div>
                <div class="span4">
                    <h2>PyHug</h2>
                    <p>活動於新竹周邊的 Python 程式員。非常歡迎你加入我們的聚會！</p>
                    <p><a class="btn" href="http://www.meetup.com/pythonhug/">View details &raquo;</a></p>
                </div>
                <div class="span4">
                    <h2>Tainan.py</h2>
                    <p>活動於台南周邊的 Python 人客，歡迎來吃！</p>
                    <p><a class="btn" href="http://www.meetup.com/Tainan-py-Python-Tainan-User-Group/">View details &raquo;</a></p>
                </div>
            </div>
            <hr>
            <p>&copy; Python Taiwan 2013</p>
        </div> <!-- /container -->
    </footer>

    <a href="https://github.com/lucemia/taiwan.py"><img style="background-color:transparent;position: absolute; top: 0; right: 0; border: 0; z-index:9999" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>

    <script src="/taiwan.py/assets/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/taiwan.py/assets/js/jquery.min.js" type="text/javascript"></script>
<script src="/taiwan.py/assets/js/mynt.min.js" type="text/javascript"></script>
<script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-dropdown.js" type="text/javascript"></script>
</body>
</html>